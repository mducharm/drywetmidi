<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Using in Unity | DryWetMIDI </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Using in Unity | DryWetMIDI ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../../images/favicon.png">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="a_develop_unity">
<h1 id="using-in-unity">Using in Unity</h1>

<p>This article describes how to use DryWetMIDI within a Unity project. All you need is:</p>
<ol>
<li><p>Create <em>DryWetMIDI</em> folder in project's <em>Assets</em> folder.</p>
</li>
<li><p>Download the library main binary:</p>
<ul>
<li>for <em>master</em> branch take <em>DryWetMIDI.&lt;release_number&gt;-bin-netstandard20.zip</em> archive from <a href="https://github.com/melanchall/drywetmidi/releases">Releases</a> (&lt;release_number&gt; is the number of the library release you want to take binaries of);</li>
<li>for <em>develop</em> branch go to <a href="https://dev.azure.com/Melanchall/DryWetMIDI/_build/latest?definitionId=6&amp;branchName=develop">https://dev.azure.com/Melanchall/DryWetMIDI/_build/latest?definitionId=6&amp;branchName=develop</a> and download <em>DryWetMIDI.&lt;release_number&gt;-bin-netstandard20.zip</em> from <code>Artifacts</code> → <code>Binaries</code>.</li>
</ul>
</li>
<li><p>Download native binaries required to work with MIDI devices and default playback:</p>
<ul>
<li>for <em>master</em> branch take <em>DryWetMIDI.&lt;release_number&gt;-bin-native.zip</em> archive from <a href="https://github.com/melanchall/drywetmidi/releases">Releases</a>;</li>
<li>for <em>develop</em> branch go to <a href="https://dev.azure.com/Melanchall/DryWetMIDI/_build/latest?definitionId=6&amp;branchName=develop">https://dev.azure.com/Melanchall/DryWetMIDI/_build/latest?definitionId=6&amp;branchName=develop</a> and download <em>DryWetMIDI.&lt;release_number&gt;-bin-native.zip</em> from <code>Artifacts</code> → <code>Binaries</code>.</li>
</ul>
<p>(<em>master</em> branch contains code that the library releases built on. <em>develop</em> one is for current development so if you need the latest API, use this branch)</p>
</li>
<li><p>Extract those two archives into project's <em>Assets</em> → <em>DryWetMIDI</em> folder.</p>
</li>
</ol>
<p>Now you can use DryWetMIDI API in your Unity scripts.</p>
<p>Following script will listen all <a class="xref" href="../devices/Input-device.html">input devices</a> for incoming MIDI events and print them to <code>Debug.Log</code>:</p>
<pre><code class="lang-csharp">using System.Collections.Generic;
using System.Linq;
using Melanchall.DryWetMidi.Multimedia;
using UnityEngine;

public class TestScript : MonoBehaviour
{
    private InputDevice[] _inputDevices;

    private void Start()
    {
        Debug.Log(&quot;Start MIDI events listening on all input device...&quot;);

        _inputDevices = InputDevice.GetAll().ToArray();

        foreach (var inputDevice in _inputDevices)
        {
            inputDevice.EventReceived += OnEventReceived;
            inputDevice.StartEventsListening();
        }

        Debug.Log(&quot;MIDI events listening started.&quot;);
    }

    private void OnDestroy()
    {
        Debug.Log(&quot;Releasing devices resources...&quot;);

        foreach (var inputDevice in _inputDevices)
        {
            inputDevice.EventReceived -= OnEventReceived;
            inputDevice.Dispose();
        }

        Debug.Log(&quot;Devices resources released.&quot;);
    }

    private void OnEventReceived(object sender, MidiEventReceivedEventArgs e)
    {
        Debug.Log($&quot;Event received on '{((MidiDevice)sender).Name}': {e.Event}&quot;);
    }
}
</code></pre>
<div class="IMPORTANT">
<h5>Important</h5>
<p>Pay attention to <code>OnDestroy</code> method. You should always take care about disposing MIDI devices. Without it all resources taken by the device will live until GC collect them. In case of Unity it means Unity may need be reopened to be able to use the same devices again (for example, on Windows).</p>
</div>
<p>Log will contain records like these:</p>
<pre><code class="lang-text">Start MIDI events listening on all input device...
MIDI events listening started.

Event received on 'MIDI B': Note On [0] (38, 82)
Event received on 'MIDI B': Note Off [0] (38, 0)
Event received on 'MIDI B': Control Change [0] (123, 0)
Event received on 'MIDI B': Control Change [0] (121, 0)
Event received on 'MIDI B': Control Change [1] (123, 0)
Event received on 'MIDI B': Control Change [1] (121, 0)
Event received on 'MIDI B': Control Change [2] (123, 0)
Event received on 'MIDI A': Note On [0] (67, 93)
Event received on 'MIDI A': Note Off [0] (67, 0)

Releasing devices resources...
Devices resources released.
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            2022 / Generated by <a href="https://dotnet.github.io/docfx">DocFX</a>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
